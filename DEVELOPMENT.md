[![Build Status](https://travis-ci.com/pulumi/pulumi-awsx.svg?token=eHg7Zp5zdDDJfTjY8ejq&branch=master)](https://travis-ci.com/pulumi/pulumi-awsx)

# Developing AWSX components

## Prerequisites

Essentials:

- NodeJS
- Go
- Make

For building the SDKs:

- Dotnet
- Python

## Project Structure

- `awsx`: the provider, written in Typescript
- `awsx-classic`: the original typescript-only version of AWSX
- `examples`: multi-lang examples which are executed as acceptance tests
- `examples-classic`: examples of aws-classic (no longer run as acceptance tests)
- `schemagen`: Go program for generating the schema and SDKs
- `sdk`: Generated SDKs in each language

## Development Workflow

1. The schema is generated by schemagen. The entry point is `schemagen/pkg/gen/schema.go`.
1. Run `make schema` to generate the `awsx/schema.json` and provider types.
1. Run `make build_sdks` to generate all SDKs in `sdk` from the `awsx/schema.json`.
1. Run `make provider` to auto-generate code in `awsx/schema-types.ts` for the provider from the schema then compile the code.
1. Implement provider resources. The entry point for provider resources is `awsx/resources.ts`.

## Testing Workflow

Before testing, make sure you are authenticated with Pulumi and AWS in your terminal.

For running Typescript examples locally:

1. `make install_provider install_nodejs_sdk` - prep provider and SDK for local use
1. `cd examples/YOUR_EXAMPLE`
1. `yarn && yarn link @pulumi/awsx` - install dependencies, but use local version of
1. `PATH=~/YOUR_DEV_FOLDER/pulumi-awsx/bin/:$PATH pulumi up`
